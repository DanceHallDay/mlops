schema: '2.0'
stages:
  preprocessing:
    cmd: python src/preprocessing/data_preprocessing.py
    deps:
    - path: data/item_categories.csv
      md5: 05c62f1bed0c0655924fc62fe921fb56
      size: 3573
    - path: data/items.csv
      md5: effd92430acdb03efca8542f7270e334
      size: 1568417
    - path: data/sales_train.csv
      md5: bc7e53cc48549aba37d690093256facf
      size: 94603866
    - path: data/shops.csv
      md5: beb40ce29c3db609a93b19ebbd1667b1
      size: 2977
    - path: data/test.csv
      md5: aabf81b3af9a427e897aa77f77e8b971
      size: 3182735
    - path: src/preprocessing/data_preprocessing.py
      md5: 9926a0299bb96a52278cfe443f2df7fb
      size: 1357
    params:
      params.yaml:
        preprocessing:
          add_lag_features: true
          lags:
          - 1
          - 3
          - 6
          lag_features:
          - item_price
          - item_cnt_day
          - item_revenue
    outs:
    - path: data/preprocessed/train_dataset.csv
      md5: e4add3c61845dea1567898dc7de4d4b4
      size: 256032272
  training:
    cmd: python src/hyperparameters.py
    deps:
    - path: data/preprocessed/train_dataset.csv
      md5: e4add3c61845dea1567898dc7de4d4b4
      size: 256032272
    - path: src/hyperparameters.py
      md5: 935ea32de065eced1096d6eb69272081
      size: 2963
    params:
      params.yaml:
        cross_validation:
          train_size: 20
          test_size: 7
        model_params:
          iterations: 30
          verbose: 50
          loss_function: RMSE
    outs:
    - path: evaluations/images/fi.png
      md5: 0b8058fdb9a07bb4f7fcfac59b792a29
      size: 19330
    - path: evaluations/metrics/metrics.json
      md5: 1cd50a4b556e5000ea0b89760056eadb
      size: 56
    - path: evaluations/plots/plots_test.csv
      md5: f7e7c221a80d7333bdacf61c81fcb5db
      size: 147
    - path: evaluations/plots/plots_train.csv
      md5: 0933b7afc89e575a4cc3f517606ca160
      size: 151
